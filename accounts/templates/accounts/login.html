{% extends 'base.html' %}

{% load i18n static %}

{% block title %}{{ block.super }} | {% trans "Internal" %}{% endblock %}

{% block page %}
    <section class="hero is-fullheight has-background-grey-light">
        <div class="columns m-0 is-centered">
            <div class="column is-full is-two-thirds-tablet is-two-fifths-desktop is-one-quarter-fullhd">
                <figure class="image is-128x128 mx-auto my-6">
                    <img src="{% static 'img/logo-512.png' %}" alt="logo">
                </figure>

                {% if form.errors %}
                    <div class="notification is-danger">
                        {% trans "Your username or password is wrong." %}
                    </div>
                {% endif %}

                {% if next %}
                    <div class="notification is-warning">
                        {% if user.is_authenticated %}
                            {% blocktrans %}
                                You don't have the permissions to access this page. Please log in with a different user
                                who has the required permissions.
                            {% endblocktrans %}
                        {% else %}
                            {% blocktrans %}
                                To access this page you need to log in first.
                            {% endblocktrans %}
                        {% endif %}
                    </div>
                {% endif %}

                <div class="box m-3">
                    <form action="{% url 'login' %}" method="post">
                        {% csrf_token %}

                        <input name="next" type="hidden" value="{{ next }}">

                        <div class="field">
                            <label class="label"
                                   for="{{ form.username.id_for_label }}">{{ form.username.label }}</label>
                            <div class="control">
                                {{ form.username }}
                            </div>
                        </div>

                        <div class="field">
                            <label class="label"
                                   for="{{ form.password.id_for_label }}">{{ form.password.label }}</label>
                            <div class="control">
                                {{ form.password }}
                            </div>
                        </div>

                        <div class="buttons">
                            <button class="button is-primary" type="submit">Anmelden</button>
                            <a class="button is-ghost" href="{% url 'password_reset' %}">Passwort vergessen?</a>
                        </div>
                    </form>
                </div>

            </div>
        </div>
    </section>
{% endblock page %}
